{% extends "base.html" %}

{% block title %}{{ asset.name }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>{{ asset.name }}</h1>
    <div>
        {% include "includes/favorite_button.html" with object=asset %}
        <a href="{% url 'assets:asset_edit' asset.pk %}" class="btn btn-secondary">Edit</a>
        <a href="{% url 'assets:asset_list' %}" class="btn btn-outline-secondary">Back to List</a>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <h3>Details</h3>
        <dl class="row">
            <dt class="col-sm-4">Type:</dt><dd class="col-sm-8">{{ asset.get_asset_type_display }}</dd>
            <dt class="col-sm-4">Asset Tag:</dt><dd class="col-sm-8">{{ asset.asset_tag }}</dd>
            <dt class="col-sm-4">Serial Number:</dt><dd class="col-sm-8">{{ asset.serial_number }}</dd>
            <dt class="col-sm-4">Manufacturer:</dt><dd class="col-sm-8">{{ asset.manufacturer }}</dd>
            <dt class="col-sm-4">Model:</dt><dd class="col-sm-8">{{ asset.model }}</dd>
            <dt class="col-sm-4">Contact:</dt><dd class="col-sm-8">{{ asset.primary_contact.full_name|default:"N/A" }}</dd>
        </dl>

        {% if asset.tags.all %}
        <h5>Tags</h5>
        <div>
            {% for tag in asset.tags.all %}
            <span class="badge" style="background-color: {{ tag.color }}">{{ tag.name }}</span>
            {% endfor %}
        </div>
        {% endif %}

        {% if asset.notes %}
        <h5 class="mt-3">Notes</h5>
        <p>{{ asset.notes }}</p>
        {% endif %}
    </div>
    <div class="col-md-6">
        <h3>Custom Fields</h3>
        {% if asset.custom_fields %}
        <pre>{{ asset.custom_fields|safe }}</pre>
        {% else %}
        <p class="text-muted">No custom fields defined.</p>
        {% endif %}

        <h3 class="mt-4">Relationships</h3>
        {% if relationships %}
        <ul>
            {% for rel in relationships %}
            <li>{{ rel.get_relation_type_display }}: {{ rel.target_type }}:{{ rel.target_id }}</li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="text-muted">No relationships.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
